{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/matthewlones/Documents/flask-react-app/frontend-final/src/components/ReplayMode.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst REPLAY_OPTIONS = [{\n  id: 0,\n  name: \"Harvest the Plant\"\n}, {\n  id: 1,\n  name: \"Draw a Circle\"\n}, {\n  id: 2,\n  name: \"Wave Hello\"\n}];\nexport default function ReplayMode() {\n  _s();\n  const [selectedId, setSelectedId] = useState(null);\n  const [status, setStatus] = useState(\"Idle\");\n  const [messages, setMessages] = useState([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const [startTime, setStartTime] = useState(null);\n  const scrollRef = useRef(null);\n  const [latestCoord, setLatestCoord] = useState(null);\n  const [coordHistory, setCoordHistory] = useState([]);\n  const gridRef = useRef(null);\n  const startReplay = () => {\n    if (selectedId === null) return;\n    setStatus(\"Sending replay request...\");\n    setMessages([]);\n    setCoordHistory([]);\n    setLatestCoord(null);\n    setIsRunning(true);\n    setStartTime(Date.now());\n    fetch(\"/api/start-replay\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        index: selectedId\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.success) {\n        setStatus(\"Replay started!\");\n      } else {\n        setStatus(\"❌ Failed to start replay.\");\n        setIsRunning(false);\n      }\n    }).catch(err => {\n      setStatus(\"❌ Error contacting server.\");\n      setIsRunning(false);\n    });\n  };\n  const clearLog = () => {\n    setMessages([]);\n    setCoordHistory([]);\n  };\n  useEffect(() => {\n    if (!isRunning) return;\n    const interval = setInterval(() => {\n      fetch(\"/api/replay-status\").then(res => res.json()).then(data => {\n        if (data.messages) {\n          setMessages(prev => {\n            const updated = [...prev, ...data.messages.map(msg => ({\n              ...msg,\n              timestamp: ((Date.now() - startTime) / 1000).toFixed(2) + \"s\"\n            }))];\n\n            // Find coordinate updates\n            const lastUpdate = data.messages.reverse().find(m => m.type === \"update\");\n            if (lastUpdate && lastUpdate.data) {\n              const correctedCoord = {\n                x: lastUpdate.data.y,\n                // 🔁 Swapped\n                y: lastUpdate.data.x,\n                // 🔁 Swapped\n                z: lastUpdate.data.z,\n                time: Date.now()\n              };\n              setLatestCoord(correctedCoord);\n              setCoordHistory(prev => [...prev, correctedCoord]);\n            }\n            return updated;\n          });\n        }\n        if (data.done) {\n          setStatus(\"✅ Replay complete.\");\n          setIsRunning(false);\n          clearInterval(interval);\n        }\n      }).catch(err => {\n        setStatus(\"❌ Error polling status\");\n        setIsRunning(false);\n        clearInterval(interval);\n      });\n    }, 100);\n    return () => clearInterval(interval);\n  }, [isRunning, startTime]);\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Clean up old coordinate history points\n  useEffect(() => {\n    if (coordHistory.length > 10) {\n      const now = Date.now();\n      setCoordHistory(prev => prev.filter(coord => now - coord.time < 3000));\n    }\n  }, [coordHistory]);\n\n  // Convert grid coordinates to pixel positions\n  const coordToPixel = (x, y) => {\n    // Map x from [-30, 30] to [0, 100%] of grid width\n    // Map y from [0, 40] to [100%, 0] of grid height (inverted y-axis)\n\n    if (!gridRef.current) return {\n      x: 0,\n      y: 0\n    };\n    const gridWidth = gridRef.current.clientWidth;\n    const gridHeight = gridRef.current.clientHeight;\n\n    // Convert x from [-30, 30] to [0, 1] then to pixels\n    const normalizedX = (x + 30) / 60;\n    const pixelX = normalizedX * gridWidth;\n\n    // Convert y from [0, 40] to [1, 0] then to pixels (inverted)\n    const normalizedY = 1 - y / 40;\n    const pixelY = normalizedY * gridHeight;\n    return {\n      x: pixelX,\n      y: pixelY\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-t from-black to-blue-950/90 border border-blue-500/30 shadow-2xl rounded-lg p-6 space-y-6 font-display\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 tracking-wide text-center\",\n      children: \"Replay Mode\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: REPLAY_OPTIONS.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedId(option.id),\n        className: `block w-full text-left px-4 py-3 rounded-lg transition shadow-md border text-sm font-bold\n              ${selectedId === option.id ? \"bg-gradient-to-r from-blue-800 to-blue-900 text-white border-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)]\" : \"bg-blue-950/80 hover:bg-blue-900/60 border-blue-500/20 hover:border-blue-500/40\"}`,\n        disabled: isRunning,\n        children: option.name\n      }, option.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n      onClick: startReplay,\n      disabled: selectedId === null || isRunning,\n      className: \"w-full mt-4 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 shadow-lg shadow-green-900/50 hover:shadow-green-500/30 hover:shadow-[0_0_20px_rgba(16,185,129,0.6)] disabled:shadow-none\",\n      whileHover: {\n        scale: 1.02\n      },\n      whileTap: {\n        scale: 0.98\n      },\n      children: isRunning ? \"Running...\" : \"Start Replay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n      onClick: clearLog,\n      className: \"w-full bg-gradient-to-r from-red-700 to-red-800 hover:from-red-600 hover:to-red-700 text-white py-2 px-2 mt-2 rounded-lg shadow-md shadow-red-900/50 hover:shadow-red-500/30 hover:shadow-[0_0_15px_rgba(239,68,68,0.5)] font-bold\",\n      disabled: messages.length === 0,\n      whileHover: {\n        scale: 1.02\n      },\n      whileTap: {\n        scale: 0.98\n      },\n      children: \"Clear Log\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 bg-black/80 rounded-lg text-sm max-h-64 overflow-y-auto border border-blue-500/30 shadow-inner\",\n      ref: scrollRef,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-cyan-300 mb-2\",\n        children: \"Replay Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-1 text-blue-100\",\n        children: messages.map((msg, i) => {\n          if (msg.type === \"update\" && msg.data) {\n            // Swap x and y for display\n            const {\n              x: y,\n              y: x,\n              z\n            } = msg.data;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\u27A4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-300 font-mono\",\n                children: [\"x: \", x, \", y: \", y, \", z: \", z]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"bounds\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-yellow-300 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-yellow-300\",\n                children: \"\\u26A0\\uFE0F Out of bounds!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"done\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-green-400 font-semibold flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400\",\n                children: \"\\u2705 Replay Complete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"error\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-red-400 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-400\",\n                children: [\"\\u274C Error: \", msg.message]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this);\n          }\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-gray-400 italic flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDD52\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-cyan-200\",\n              children: msg.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: JSON.stringify(msg)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 italic text-xs text-cyan-300\",\n        children: [\"Status: \", status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 bg-black/80 p-4 rounded-lg shadow-xl relative border border-blue-500/30\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-sm text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2\",\n        children: \"Live Position Grid (x vs y in cm)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: gridRef,\n        className: \"relative w-full h-80 border border-blue-400/30 bg-gradient-to-b from-blue-950/90 to-black overflow-hidden rounded-md shadow-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0\",\n          children: [Array.from({\n            length: 21\n          }, (_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute w-full border-t ${i % 5 === 0 ? \"border-blue-400/40\" : \"border-blue-400/20\"}`,\n            style: {\n              top: `${i / 20 * 100}%`\n            },\n            children: i % 5 === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"absolute -left-7 -translate-y-1/2 text-xs text-blue-300/70 font-bold\",\n              children: 40 - i * 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 19\n            }, this)\n          }, `h-${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this)), Array.from({\n            length: 31\n          }, (_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute h-full border-l ${i % 5 === 0 ? \"border-blue-400/40\" : \"border-blue-400/20\"}`,\n            style: {\n              left: `${i / 30 * 100}%`\n            },\n            children: i % 5 === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"absolute -bottom-5 -translate-x-1/2 text-xs text-blue-300/70 font-bold\",\n              children: -30 + i * 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 19\n            }, this)\n          }, `v-${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute left-0 top-0 h-full border-l border-blue-400/60\",\n            style: {\n              left: \"50%\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute left-0 top-full w-full border-t border-blue-400/60\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: coordHistory.map((coord, index) => {\n            const {\n              x,\n              y\n            } = coordToPixel(coord.x, coord.y);\n            return /*#__PURE__*/_jsxDEV(motion.div, {\n              className: \"absolute w-2 h-2 rounded-full bg-green-500/30\",\n              style: {\n                left: `${x}px`,\n                top: `${y}px`\n              },\n              initial: {\n                opacity: 0.8,\n                scale: 0.5\n              },\n              animate: {\n                opacity: 0.3,\n                scale: 0.7\n              },\n              exit: {\n                opacity: 0\n              },\n              transition: {\n                duration: 1\n              }\n            }, `history-${coord.time}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n          children: latestCoord && /*#__PURE__*/_jsxDEV(motion.div, {\n            className: \"absolute w-4 h-4 rounded-full bg-green-400 shadow-lg shadow-green-500/50\",\n            style: {\n              left: `${coordToPixel(latestCoord.x, latestCoord.y).x}px`,\n              top: `${coordToPixel(latestCoord.x, latestCoord.y).y}px`,\n              filter: \"drop-shadow(0 0 12px rgba(74, 222, 128, 0.9))\"\n            },\n            initial: {\n              scale: 0.5,\n              opacity: 0.5\n            },\n            animate: {\n              scale: [1, 1.2, 1],\n              opacity: 1\n            },\n            transition: {\n              duration: 0.5,\n              ease: \"easeOut\"\n            }\n          }, \"current-position\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-1 right-2 text-xs text-blue-300/70 font-bold\",\n          children: \"x-axis (cm)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-2 left-2 text-xs text-blue-300/70 font-bold\",\n          children: \"y-axis (cm)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n_s(ReplayMode, \"pUj6f9tKtH3H/5Zu7u9goy/cmJw=\");\n_c = ReplayMode;\nvar _c;\n$RefreshReg$(_c, \"ReplayMode\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useRef","motion","AnimatePresence","jsxDEV","_jsxDEV","REPLAY_OPTIONS","id","name","ReplayMode","selectedId","setSelectedId","status","setStatus","messages","setMessages","isRunning","setIsRunning","startTime","setStartTime","scrollRef","latestCoord","setLatestCoord","coordHistory","setCoordHistory","gridRef","startReplay","Date","now","fetch","method","headers","body","JSON","stringify","index","then","res","json","data","success","catch","err","clearLog","interval","setInterval","prev","updated","map","msg","timestamp","toFixed","lastUpdate","reverse","find","m","type","correctedCoord","x","y","z","time","done","clearInterval","current","scrollTop","scrollHeight","length","filter","coord","coordToPixel","gridWidth","clientWidth","gridHeight","clientHeight","normalizedX","pixelX","normalizedY","pixelY","className","children","fileName","lineNumber","columnNumber","option","onClick","disabled","button","whileHover","scale","whileTap","ref","i","message","Array","from","_","style","top","left","div","initial","opacity","animate","exit","transition","duration","ease","_c","$RefreshReg$"],"sources":["/Users/matthewlones/Documents/flask-react-app/frontend-final/src/components/ReplayMode.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\n\nconst REPLAY_OPTIONS = [\n  { id: 0, name: \"Harvest the Plant\" },\n  { id: 1, name: \"Draw a Circle\" },\n  { id: 2, name: \"Wave Hello\" },\n]\n\nexport default function ReplayMode() {\n  const [selectedId, setSelectedId] = useState(null)\n  const [status, setStatus] = useState(\"Idle\")\n  const [messages, setMessages] = useState([])\n  const [isRunning, setIsRunning] = useState(false)\n  const [startTime, setStartTime] = useState(null)\n  const scrollRef = useRef(null)\n  const [latestCoord, setLatestCoord] = useState(null)\n  const [coordHistory, setCoordHistory] = useState([])\n  const gridRef = useRef(null)\n\n  const startReplay = () => {\n    if (selectedId === null) return\n\n    setStatus(\"Sending replay request...\")\n    setMessages([])\n    setCoordHistory([])\n    setLatestCoord(null)\n    setIsRunning(true)\n    setStartTime(Date.now())\n\n    fetch(\"/api/start-replay\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ index: selectedId }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.success) {\n          setStatus(\"Replay started!\")\n        } else {\n          setStatus(\"❌ Failed to start replay.\")\n          setIsRunning(false)\n        }\n      })\n      .catch((err) => {\n        setStatus(\"❌ Error contacting server.\")\n        setIsRunning(false)\n      })\n  }\n\n  const clearLog = () => {\n    setMessages([])\n    setCoordHistory([])\n  }\n\n  useEffect(() => {\n    if (!isRunning) return\n\n    const interval = setInterval(() => {\n      fetch(\"/api/replay-status\")\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.messages) {\n            setMessages((prev) => {\n              const updated = [\n                ...prev,\n                ...data.messages.map((msg) => ({\n                  ...msg,\n                  timestamp: ((Date.now() - startTime) / 1000).toFixed(2) + \"s\",\n                })),\n              ]\n\n              // Find coordinate updates\n              const lastUpdate = data.messages.reverse().find((m) => m.type === \"update\");\n              if (lastUpdate && lastUpdate.data) {\n                const correctedCoord = {\n                  x: lastUpdate.data.y, // 🔁 Swapped\n                  y: lastUpdate.data.x, // 🔁 Swapped\n                  z: lastUpdate.data.z,\n                  time: Date.now(),\n                };\n                setLatestCoord(correctedCoord);\n                setCoordHistory((prev) => [...prev, correctedCoord]);\n              }\n\n              return updated\n            })\n          }\n          if (data.done) {\n            setStatus(\"✅ Replay complete.\")\n            setIsRunning(false)\n            clearInterval(interval)\n          }\n        })\n        .catch((err) => {\n          setStatus(\"❌ Error polling status\")\n          setIsRunning(false)\n          clearInterval(interval)\n        })\n    }, 100)\n\n    return () => clearInterval(interval)\n  }, [isRunning, startTime])\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\n    }\n  }, [messages])\n\n  // Clean up old coordinate history points\n  useEffect(() => {\n    if (coordHistory.length > 10) {\n      const now = Date.now()\n      setCoordHistory((prev) => prev.filter((coord) => now - coord.time < 3000))\n    }\n  }, [coordHistory])\n\n  // Convert grid coordinates to pixel positions\n  const coordToPixel = (x, y) => {\n    // Map x from [-30, 30] to [0, 100%] of grid width\n    // Map y from [0, 40] to [100%, 0] of grid height (inverted y-axis)\n\n    if (!gridRef.current) return { x: 0, y: 0 }\n\n    const gridWidth = gridRef.current.clientWidth\n    const gridHeight = gridRef.current.clientHeight\n\n    // Convert x from [-30, 30] to [0, 1] then to pixels\n    const normalizedX = (x + 30) / 60\n    const pixelX = normalizedX * gridWidth\n\n    // Convert y from [0, 40] to [1, 0] then to pixels (inverted)\n    const normalizedY = 1 - y / 40\n    const pixelY = normalizedY * gridHeight\n\n    return { x: pixelX, y: pixelY }\n  }\n\n  return (\n    <div className=\"bg-gradient-to-t from-black to-blue-950/90 border border-blue-500/30 shadow-2xl rounded-lg p-6 space-y-6 font-display\">\n      <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 tracking-wide text-center\">\n        Replay Mode\n      </h2>\n\n      <div className=\"space-y-2\">\n        {REPLAY_OPTIONS.map((option) => (\n          <button\n            key={option.id}\n            onClick={() => setSelectedId(option.id)}\n            className={`block w-full text-left px-4 py-3 rounded-lg transition shadow-md border text-sm font-bold\n              ${\n                selectedId === option.id\n                  ? \"bg-gradient-to-r from-blue-800 to-blue-900 text-white border-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)]\"\n                  : \"bg-blue-950/80 hover:bg-blue-900/60 border-blue-500/20 hover:border-blue-500/40\"\n              }`}\n            disabled={isRunning}\n          >\n            {option.name}\n          </button>\n        ))}\n      </div>\n\n      <motion.button\n        onClick={startReplay}\n        disabled={selectedId === null || isRunning}\n        className=\"w-full mt-4 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 shadow-lg shadow-green-900/50 hover:shadow-green-500/30 hover:shadow-[0_0_20px_rgba(16,185,129,0.6)] disabled:shadow-none\"\n        whileHover={{ scale: 1.02 }}\n        whileTap={{ scale: 0.98 }}\n      >\n        {isRunning ? \"Running...\" : \"Start Replay\"}\n      </motion.button>\n\n      <motion.button\n        onClick={clearLog}\n        className=\"w-full bg-gradient-to-r from-red-700 to-red-800 hover:from-red-600 hover:to-red-700 text-white py-2 px-2 mt-2 rounded-lg shadow-md shadow-red-900/50 hover:shadow-red-500/30 hover:shadow-[0_0_15px_rgba(239,68,68,0.5)] font-bold\"\n        disabled={messages.length === 0}\n        whileHover={{ scale: 1.02 }}\n        whileTap={{ scale: 0.98 }}\n      >\n        Clear Log\n      </motion.button>\n\n      <div\n        className=\"mt-6 p-4 bg-black/80 rounded-lg text-sm max-h-64 overflow-y-auto border border-blue-500/30 shadow-inner\"\n        ref={scrollRef}\n      >\n        <p className=\"font-bold text-cyan-300 mb-2\">Replay Status:</p>\n        <ul className=\"space-y-1 text-blue-100\">\n          {messages.map((msg, i) => {\n            if (msg.type === \"update\" && msg.data) {\n              // Swap x and y for display\n              const { x: y, y: x, z } = msg.data;\n              return (\n                <li key={i} className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-gray-400\">➤</span>\n                  <span className=\"text-green-300 font-mono\">\n                    x: {x}, y: {y}, z: {z}\n                  </span>\n                </li>\n              );\n            }\n            \n            if (msg.type === \"bounds\") {\n              return (\n                <li key={i} className=\"text-yellow-300 flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-yellow-300\">⚠️ Out of bounds!</span>\n                </li>\n              )\n            }\n            if (msg.type === \"done\") {\n              return (\n                <li key={i} className=\"text-green-400 font-semibold flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-green-400\">✅ Replay Complete</span>\n                </li>\n              )\n            }\n            if (msg.type === \"error\") {\n              return (\n                <li key={i} className=\"text-red-400 flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-red-400\">❌ Error: {msg.message}</span>\n                </li>\n              )\n            }\n            return (\n              <li key={i} className=\"text-gray-400 italic flex items-center space-x-2\">\n                <span>🕒</span>\n                <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                <span>{JSON.stringify(msg)}</span>\n              </li>\n            )\n          })}\n        </ul>\n        <p className=\"mt-2 italic text-xs text-cyan-300\">Status: {status}</p>\n      </div>\n\n      <div className=\"mt-4 bg-black/80 p-4 rounded-lg shadow-xl relative border border-blue-500/30\">\n        <p className=\"font-bold text-sm text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2\">\n          Live Position Grid (x vs y in cm)\n        </p>\n        <div\n          ref={gridRef}\n          className=\"relative w-full h-80 border border-blue-400/30 bg-gradient-to-b from-blue-950/90 to-black overflow-hidden rounded-md shadow-inner\"\n        >\n          {/* Grid lines */}\n          <div className=\"absolute inset-0\">\n            {/* Horizontal grid lines (y-axis) */}\n            {Array.from({ length: 21 }, (_, i) => (\n              <div\n                key={`h-${i}`}\n                className={`absolute w-full border-t ${i % 5 === 0 ? \"border-blue-400/40\" : \"border-blue-400/20\"}`}\n                style={{\n                  top: `${(i / 20) * 100}%`,\n                }}\n              >\n                {i % 5 === 0 && (\n                  <span className=\"absolute -left-7 -translate-y-1/2 text-xs text-blue-300/70 font-bold\">\n                    {40 - i * 2}\n                  </span>\n                )}\n              </div>\n            ))}\n\n            {/* Vertical grid lines (x-axis) */}\n            {Array.from({ length: 31 }, (_, i) => (\n              <div\n                key={`v-${i}`}\n                className={`absolute h-full border-l ${i % 5 === 0 ? \"border-blue-400/40\" : \"border-blue-400/20\"}`}\n                style={{\n                  left: `${(i / 30) * 100}%`,\n                }}\n              >\n                {i % 5 === 0 && (\n                  <span className=\"absolute -bottom-5 -translate-x-1/2 text-xs text-blue-300/70 font-bold\">\n                    {-30 + i * 2}\n                  </span>\n                )}\n              </div>\n            ))}\n\n            {/* Origin lines */}\n            <div className=\"absolute left-0 top-0 h-full border-l border-blue-400/60\" style={{ left: \"50%\" }}></div>\n            <div className=\"absolute left-0 top-full w-full border-t border-blue-400/60\"></div>\n          </div>\n\n          {/* Coordinate history trail */}\n          <AnimatePresence>\n            {coordHistory.map((coord, index) => {\n              const { x, y } = coordToPixel(coord.x, coord.y)\n              return (\n                <motion.div\n                  key={`history-${coord.time}`}\n                  className=\"absolute w-2 h-2 rounded-full bg-green-500/30\"\n                  style={{\n                    left: `${x}px`,\n                    top: `${y}px`,\n                  }}\n                  initial={{ opacity: 0.8, scale: 0.5 }}\n                  animate={{ opacity: 0.3, scale: 0.7 }}\n                  exit={{ opacity: 0 }}\n                  transition={{ duration: 1 }}\n                />\n              )\n            })}\n          </AnimatePresence>\n\n          {/* Current position dot */}\n          <AnimatePresence>\n            {latestCoord && (\n              <motion.div\n                key=\"current-position\"\n                className=\"absolute w-4 h-4 rounded-full bg-green-400 shadow-lg shadow-green-500/50\"\n                style={{\n                  left: `${coordToPixel(latestCoord.x, latestCoord.y).x}px`,\n                  top: `${coordToPixel(latestCoord.x, latestCoord.y).y}px`,\n                  filter: \"drop-shadow(0 0 12px rgba(74, 222, 128, 0.9))\",\n                }}\n                initial={{ scale: 0.5, opacity: 0.5 }}\n                animate={{\n                  scale: [1, 1.2, 1],\n                  opacity: 1,\n                }}\n                transition={{\n                  duration: 0.5,\n                  ease: \"easeOut\",\n                }}\n              />\n            )}\n          </AnimatePresence>\n\n          {/* Axis labels */}\n          <div className=\"absolute bottom-1 right-2 text-xs text-blue-300/70 font-bold\">x-axis (cm)</div>\n          <div className=\"absolute top-2 left-2 text-xs text-blue-300/70 font-bold\">y-axis (cm)</div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"mappings":"AAAA,YAAY;;AAAA,IAAAA,YAAA;EAAAC,EAAA,GAAAC,YAAA;AAEZ,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEvD,MAAMC,cAAc,GAAG,CACrB;EAAEC,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE;AAAoB,CAAC,EACpC;EAAED,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE;AAAgB,CAAC,EAChC;EAAED,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE;AAAa,CAAC,CAC9B;AAED,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAZ,EAAA;EACnC,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACmB,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAMqB,SAAS,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACoB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACwB,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM0B,OAAO,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAE5B,MAAMyB,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAIhB,UAAU,KAAK,IAAI,EAAE;IAEzBG,SAAS,CAAC,2BAA2B,CAAC;IACtCE,WAAW,CAAC,EAAE,CAAC;IACfS,eAAe,CAAC,EAAE,CAAC;IACnBF,cAAc,CAAC,IAAI,CAAC;IACpBL,YAAY,CAAC,IAAI,CAAC;IAClBE,YAAY,CAACQ,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;IAExBC,KAAK,CAAC,mBAAmB,EAAE;MACzBC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,KAAK,EAAEzB;MAAW,CAAC;IAC5C,CAAC,CAAC,CACC0B,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAK;MACd,IAAIA,IAAI,CAACC,OAAO,EAAE;QAChB3B,SAAS,CAAC,iBAAiB,CAAC;MAC9B,CAAC,MAAM;QACLA,SAAS,CAAC,2BAA2B,CAAC;QACtCI,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC,CAAC,CACDwB,KAAK,CAAEC,GAAG,IAAK;MACd7B,SAAS,CAAC,4BAA4B,CAAC;MACvCI,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;EACN,CAAC;EAED,MAAM0B,QAAQ,GAAGA,CAAA,KAAM;IACrB5B,WAAW,CAAC,EAAE,CAAC;IACfS,eAAe,CAAC,EAAE,CAAC;EACrB,CAAC;EAEDxB,SAAS,CAAC,MAAM;IACd,IAAI,CAACgB,SAAS,EAAE;IAEhB,MAAM4B,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjChB,KAAK,CAAC,oBAAoB,CAAC,CACxBO,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAK;QACd,IAAIA,IAAI,CAACzB,QAAQ,EAAE;UACjBC,WAAW,CAAE+B,IAAI,IAAK;YACpB,MAAMC,OAAO,GAAG,CACd,GAAGD,IAAI,EACP,GAAGP,IAAI,CAACzB,QAAQ,CAACkC,GAAG,CAAEC,GAAG,KAAM;cAC7B,GAAGA,GAAG;cACNC,SAAS,EAAE,CAAC,CAACvB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGV,SAAS,IAAI,IAAI,EAAEiC,OAAO,CAAC,CAAC,CAAC,GAAG;YAC5D,CAAC,CAAC,CAAC,CACJ;;YAED;YACA,MAAMC,UAAU,GAAGb,IAAI,CAACzB,QAAQ,CAACuC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAK,QAAQ,CAAC;YAC3E,IAAIJ,UAAU,IAAIA,UAAU,CAACb,IAAI,EAAE;cACjC,MAAMkB,cAAc,GAAG;gBACrBC,CAAC,EAAEN,UAAU,CAACb,IAAI,CAACoB,CAAC;gBAAE;gBACtBA,CAAC,EAAEP,UAAU,CAACb,IAAI,CAACmB,CAAC;gBAAE;gBACtBE,CAAC,EAAER,UAAU,CAACb,IAAI,CAACqB,CAAC;gBACpBC,IAAI,EAAElC,IAAI,CAACC,GAAG,CAAC;cACjB,CAAC;cACDN,cAAc,CAACmC,cAAc,CAAC;cAC9BjC,eAAe,CAAEsB,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEW,cAAc,CAAC,CAAC;YACtD;YAEA,OAAOV,OAAO;UAChB,CAAC,CAAC;QACJ;QACA,IAAIR,IAAI,CAACuB,IAAI,EAAE;UACbjD,SAAS,CAAC,oBAAoB,CAAC;UAC/BI,YAAY,CAAC,KAAK,CAAC;UACnB8C,aAAa,CAACnB,QAAQ,CAAC;QACzB;MACF,CAAC,CAAC,CACDH,KAAK,CAAEC,GAAG,IAAK;QACd7B,SAAS,CAAC,wBAAwB,CAAC;QACnCI,YAAY,CAAC,KAAK,CAAC;QACnB8C,aAAa,CAACnB,QAAQ,CAAC;MACzB,CAAC,CAAC;IACN,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAMmB,aAAa,CAACnB,QAAQ,CAAC;EACtC,CAAC,EAAE,CAAC5B,SAAS,EAAEE,SAAS,CAAC,CAAC;EAE1BlB,SAAS,CAAC,MAAM;IACd,IAAIoB,SAAS,CAAC4C,OAAO,EAAE;MACrB5C,SAAS,CAAC4C,OAAO,CAACC,SAAS,GAAG7C,SAAS,CAAC4C,OAAO,CAACE,YAAY;IAC9D;EACF,CAAC,EAAE,CAACpD,QAAQ,CAAC,CAAC;;EAEd;EACAd,SAAS,CAAC,MAAM;IACd,IAAIuB,YAAY,CAAC4C,MAAM,GAAG,EAAE,EAAE;MAC5B,MAAMvC,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;MACtBJ,eAAe,CAAEsB,IAAI,IAAKA,IAAI,CAACsB,MAAM,CAAEC,KAAK,IAAKzC,GAAG,GAAGyC,KAAK,CAACR,IAAI,GAAG,IAAI,CAAC,CAAC;IAC5E;EACF,CAAC,EAAE,CAACtC,YAAY,CAAC,CAAC;;EAElB;EACA,MAAM+C,YAAY,GAAGA,CAACZ,CAAC,EAAEC,CAAC,KAAK;IAC7B;IACA;;IAEA,IAAI,CAAClC,OAAO,CAACuC,OAAO,EAAE,OAAO;MAAEN,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAE3C,MAAMY,SAAS,GAAG9C,OAAO,CAACuC,OAAO,CAACQ,WAAW;IAC7C,MAAMC,UAAU,GAAGhD,OAAO,CAACuC,OAAO,CAACU,YAAY;;IAE/C;IACA,MAAMC,WAAW,GAAG,CAACjB,CAAC,GAAG,EAAE,IAAI,EAAE;IACjC,MAAMkB,MAAM,GAAGD,WAAW,GAAGJ,SAAS;;IAEtC;IACA,MAAMM,WAAW,GAAG,CAAC,GAAGlB,CAAC,GAAG,EAAE;IAC9B,MAAMmB,MAAM,GAAGD,WAAW,GAAGJ,UAAU;IAEvC,OAAO;MAAEf,CAAC,EAAEkB,MAAM;MAAEjB,CAAC,EAAEmB;IAAO,CAAC;EACjC,CAAC;EAED,oBACEzE,OAAA;IAAK0E,SAAS,EAAC,uHAAuH;IAAAC,QAAA,gBACpI3E,OAAA;MAAI0E,SAAS,EAAC,uHAAuH;MAAAC,QAAA,EAAC;IAEtI;MAAAC,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEL9E,OAAA;MAAK0E,SAAS,EAAC,WAAW;MAAAC,QAAA,EACvB1E,cAAc,CAAC0C,GAAG,CAAEoC,MAAM,iBACzB/E,OAAA;QAEEgF,OAAO,EAAEA,CAAA,KAAM1E,aAAa,CAACyE,MAAM,CAAC7E,EAAE,CAAE;QACxCwE,SAAS,EAAE;AACvB,gBACgBrE,UAAU,KAAK0E,MAAM,CAAC7E,EAAE,GACpB,8GAA8G,GAC9G,iFAAiF,EACpF;QACL+E,QAAQ,EAAEtE,SAAU;QAAAgE,QAAA,EAEnBI,MAAM,CAAC5E;MAAI,GAVP4E,MAAM,CAAC7E,EAAE;QAAA0E,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OAWR,CACT;IAAC;MAAAF,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAEN9E,OAAA,CAACH,MAAM,CAACqF,MAAM;MACZF,OAAO,EAAE3D,WAAY;MACrB4D,QAAQ,EAAE5E,UAAU,KAAK,IAAI,IAAIM,SAAU;MAC3C+D,SAAS,EAAC,8RAA8R;MACxSS,UAAU,EAAE;QAAEC,KAAK,EAAE;MAAK,CAAE;MAC5BC,QAAQ,EAAE;QAAED,KAAK,EAAE;MAAK,CAAE;MAAAT,QAAA,EAEzBhE,SAAS,GAAG,YAAY,GAAG;IAAc;MAAAiE,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC,eAEhB9E,OAAA,CAACH,MAAM,CAACqF,MAAM;MACZF,OAAO,EAAE1C,QAAS;MAClBoC,SAAS,EAAC,oOAAoO;MAC9OO,QAAQ,EAAExE,QAAQ,CAACqD,MAAM,KAAK,CAAE;MAChCqB,UAAU,EAAE;QAAEC,KAAK,EAAE;MAAK,CAAE;MAC5BC,QAAQ,EAAE;QAAED,KAAK,EAAE;MAAK,CAAE;MAAAT,QAAA,EAC3B;IAED;MAAAC,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OAAe,CAAC,eAEhB9E,OAAA;MACE0E,SAAS,EAAC,yGAAyG;MACnHY,GAAG,EAAEvE,SAAU;MAAA4D,QAAA,gBAEf3E,OAAA;QAAG0E,SAAS,EAAC,8BAA8B;QAAAC,QAAA,EAAC;MAAc;QAAAC,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC9D9E,OAAA;QAAI0E,SAAS,EAAC,yBAAyB;QAAAC,QAAA,EACpClE,QAAQ,CAACkC,GAAG,CAAC,CAACC,GAAG,EAAE2C,CAAC,KAAK;UACxB,IAAI3C,GAAG,CAACO,IAAI,KAAK,QAAQ,IAAIP,GAAG,CAACV,IAAI,EAAE;YACrC;YACA,MAAM;cAAEmB,CAAC,EAAEC,CAAC;cAAEA,CAAC,EAAED,CAAC;cAAEE;YAAE,CAAC,GAAGX,GAAG,CAACV,IAAI;YAClC,oBACElC,OAAA;cAAY0E,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBACjD3E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAE;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACzC9E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAE/B,GAAG,CAACC;cAAS;gBAAA+B,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtD9E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAC;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACxC9E,OAAA;gBAAM0E,SAAS,EAAC,0BAA0B;gBAAAC,QAAA,GAAC,KACtC,EAACtB,CAAC,EAAC,OAAK,EAACC,CAAC,EAAC,OAAK,EAACC,CAAC;cAAA;gBAAAqB,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OACjB,CAAC;YAAA,GANAS,CAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAON,CAAC;UAET;UAEA,IAAIlC,GAAG,CAACO,IAAI,KAAK,QAAQ,EAAE;YACzB,oBACEnD,OAAA;cAAY0E,SAAS,EAAC,6CAA6C;cAAAC,QAAA,gBACjE3E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAE;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACzC9E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAE/B,GAAG,CAACC;cAAS;gBAAA+B,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtD9E,OAAA;gBAAM0E,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,EAAC;cAAiB;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,GAHnDS,CAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAIN,CAAC;UAET;UACA,IAAIlC,GAAG,CAACO,IAAI,KAAK,MAAM,EAAE;YACvB,oBACEnD,OAAA;cAAY0E,SAAS,EAAC,0DAA0D;cAAAC,QAAA,gBAC9E3E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAE;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACzC9E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAE/B,GAAG,CAACC;cAAS;gBAAA+B,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtD9E,OAAA;gBAAM0E,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,EAAC;cAAiB;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,GAHlDS,CAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAIN,CAAC;UAET;UACA,IAAIlC,GAAG,CAACO,IAAI,KAAK,OAAO,EAAE;YACxB,oBACEnD,OAAA;cAAY0E,SAAS,EAAC,0CAA0C;cAAAC,QAAA,gBAC9D3E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAE;gBAAAC,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACzC9E,OAAA;gBAAM0E,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAE/B,GAAG,CAACC;cAAS;gBAAA+B,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtD9E,OAAA;gBAAM0E,SAAS,EAAC,cAAc;gBAAAC,QAAA,GAAC,gBAAS,EAAC/B,GAAG,CAAC4C,OAAO;cAAA;gBAAAZ,QAAA,EAAArF,YAAA;gBAAAsF,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA,GAHrDS,CAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAIN,CAAC;UAET;UACA,oBACE9E,OAAA;YAAY0E,SAAS,EAAC,kDAAkD;YAAAC,QAAA,gBACtE3E,OAAA;cAAA2E,QAAA,EAAM;YAAE;cAAAC,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACf9E,OAAA;cAAM0E,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAE/B,GAAG,CAACC;YAAS;cAAA+B,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACtD9E,OAAA;cAAA2E,QAAA,EAAO/C,IAAI,CAACC,SAAS,CAACe,GAAG;YAAC;cAAAgC,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA,GAH3BS,CAAC;YAAAX,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAIN,CAAC;QAET,CAAC;MAAC;QAAAF,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eACL9E,OAAA;QAAG0E,SAAS,EAAC,mCAAmC;QAAAC,QAAA,GAAC,UAAQ,EAACpE,MAAM;MAAA;QAAAqE,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAF,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OAClE,CAAC,eAEN9E,OAAA;MAAK0E,SAAS,EAAC,8EAA8E;MAAAC,QAAA,gBAC3F3E,OAAA;QAAG0E,SAAS,EAAC,iGAAiG;QAAAC,QAAA,EAAC;MAE/G;QAAAC,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACJ9E,OAAA;QACEsF,GAAG,EAAElE,OAAQ;QACbsD,SAAS,EAAC,mIAAmI;QAAAC,QAAA,gBAG7I3E,OAAA;UAAK0E,SAAS,EAAC,kBAAkB;UAAAC,QAAA,GAE9Bc,KAAK,CAACC,IAAI,CAAC;YAAE5B,MAAM,EAAE;UAAG,CAAC,EAAE,CAAC6B,CAAC,EAAEJ,CAAC,kBAC/BvF,OAAA;YAEE0E,SAAS,EAAE,4BAA4Ba,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,oBAAoB,GAAG,oBAAoB,EAAG;YACnGK,KAAK,EAAE;cACLC,GAAG,EAAE,GAAIN,CAAC,GAAG,EAAE,GAAI,GAAG;YACxB,CAAE;YAAAZ,QAAA,EAEDY,CAAC,GAAG,CAAC,KAAK,CAAC,iBACVvF,OAAA;cAAM0E,SAAS,EAAC,sEAAsE;cAAAC,QAAA,EACnF,EAAE,GAAGY,CAAC,GAAG;YAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OACP;UACP,GAVI,KAAKS,CAAC,EAAE;YAAAX,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAWV,CACN,CAAC,EAGDW,KAAK,CAACC,IAAI,CAAC;YAAE5B,MAAM,EAAE;UAAG,CAAC,EAAE,CAAC6B,CAAC,EAAEJ,CAAC,kBAC/BvF,OAAA;YAEE0E,SAAS,EAAE,4BAA4Ba,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,oBAAoB,GAAG,oBAAoB,EAAG;YACnGK,KAAK,EAAE;cACLE,IAAI,EAAE,GAAIP,CAAC,GAAG,EAAE,GAAI,GAAG;YACzB,CAAE;YAAAZ,QAAA,EAEDY,CAAC,GAAG,CAAC,KAAK,CAAC,iBACVvF,OAAA;cAAM0E,SAAS,EAAC,wEAAwE;cAAAC,QAAA,EACrF,CAAC,EAAE,GAAGY,CAAC,GAAG;YAAC;cAAAX,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OACR;UACP,GAVI,KAAKS,CAAC,EAAE;YAAAX,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAWV,CACN,CAAC,eAGF9E,OAAA;YAAK0E,SAAS,EAAC,0DAA0D;YAACkB,KAAK,EAAE;cAAEE,IAAI,EAAE;YAAM;UAAE;YAAAlB,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACxG9E,OAAA;YAAK0E,SAAS,EAAC;UAA6D;YAAAE,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAF,QAAA,EAAArF,YAAA;UAAAsF,UAAA;UAAAC,YAAA;QAAA,OAChF,CAAC,eAGN9E,OAAA,CAACF,eAAe;UAAA6E,QAAA,EACbzD,YAAY,CAACyB,GAAG,CAAC,CAACqB,KAAK,EAAElC,KAAK,KAAK;YAClC,MAAM;cAAEuB,CAAC;cAAEC;YAAE,CAAC,GAAGW,YAAY,CAACD,KAAK,CAACX,CAAC,EAAEW,KAAK,CAACV,CAAC,CAAC;YAC/C,oBACEtD,OAAA,CAACH,MAAM,CAACkG,GAAG;cAETrB,SAAS,EAAC,+CAA+C;cACzDkB,KAAK,EAAE;gBACLE,IAAI,EAAE,GAAGzC,CAAC,IAAI;gBACdwC,GAAG,EAAE,GAAGvC,CAAC;cACX,CAAE;cACF0C,OAAO,EAAE;gBAAEC,OAAO,EAAE,GAAG;gBAAEb,KAAK,EAAE;cAAI,CAAE;cACtCc,OAAO,EAAE;gBAAED,OAAO,EAAE,GAAG;gBAAEb,KAAK,EAAE;cAAI,CAAE;cACtCe,IAAI,EAAE;gBAAEF,OAAO,EAAE;cAAE,CAAE;cACrBG,UAAU,EAAE;gBAAEC,QAAQ,EAAE;cAAE;YAAE,GATvB,WAAWrC,KAAK,CAACR,IAAI,EAAE;cAAAoB,QAAA,EAAArF,YAAA;cAAAsF,UAAA;cAAAC,YAAA;YAAA,OAU7B,CAAC;UAEN,CAAC;QAAC;UAAAF,QAAA,EAAArF,YAAA;UAAAsF,UAAA;UAAAC,YAAA;QAAA,OACa,CAAC,eAGlB9E,OAAA,CAACF,eAAe;UAAA6E,QAAA,EACb3D,WAAW,iBACVhB,OAAA,CAACH,MAAM,CAACkG,GAAG;YAETrB,SAAS,EAAC,0EAA0E;YACpFkB,KAAK,EAAE;cACLE,IAAI,EAAE,GAAG7B,YAAY,CAACjD,WAAW,CAACqC,CAAC,EAAErC,WAAW,CAACsC,CAAC,CAAC,CAACD,CAAC,IAAI;cACzDwC,GAAG,EAAE,GAAG5B,YAAY,CAACjD,WAAW,CAACqC,CAAC,EAAErC,WAAW,CAACsC,CAAC,CAAC,CAACA,CAAC,IAAI;cACxDS,MAAM,EAAE;YACV,CAAE;YACFiC,OAAO,EAAE;cAAEZ,KAAK,EAAE,GAAG;cAAEa,OAAO,EAAE;YAAI,CAAE;YACtCC,OAAO,EAAE;cACPd,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;cAClBa,OAAO,EAAE;YACX,CAAE;YACFG,UAAU,EAAE;cACVC,QAAQ,EAAE,GAAG;cACbC,IAAI,EAAE;YACR;UAAE,GAfE,kBAAkB;YAAA1B,QAAA,EAAArF,YAAA;YAAAsF,UAAA;YAAAC,YAAA;UAAA,OAgBvB;QACF;UAAAF,QAAA,EAAArF,YAAA;UAAAsF,UAAA;UAAAC,YAAA;QAAA,OACc,CAAC,eAGlB9E,OAAA;UAAK0E,SAAS,EAAC,8DAA8D;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAArF,YAAA;UAAAsF,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC/F9E,OAAA;UAAK0E,SAAS,EAAC,0DAA0D;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAArF,YAAA;UAAAsF,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAF,QAAA,EAAArF,YAAA;QAAAsF,UAAA;QAAAC,YAAA;MAAA,OACxF,CAAC;IAAA;MAAAF,QAAA,EAAArF,YAAA;MAAAsF,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAF,QAAA,EAAArF,YAAA;IAAAsF,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACtF,EAAA,CAhVuBY,UAAU;AAAAmG,EAAA,GAAVnG,UAAU;AAAA,IAAAmG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}