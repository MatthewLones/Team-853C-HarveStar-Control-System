{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/matthewlones/Documents/flask-react-app/frontend-final/src/components/ReplayMode.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst REPLAY_OPTIONS = [{\n  id: 0,\n  name: \"Harvest the Plant\"\n}, {\n  id: 1,\n  name: \"Draw a Circle\"\n}, {\n  id: 2,\n  name: \"Wave Hello\"\n}];\nexport default function ReplayMode({\n  isMobile\n}) {\n  _s();\n  const [selectedId, setSelectedId] = useState(null);\n  const [status, setStatus] = useState(\"Idle\");\n  const [messages, setMessages] = useState([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const [startTime, setStartTime] = useState(null);\n  const scrollRef = useRef(null);\n  const [latestCoord, setLatestCoord] = useState(null);\n  const [coordHistory, setCoordHistory] = useState([]);\n  const gridRef = useRef(null);\n  const startReplay = () => {\n    if (selectedId === null) return;\n    setStatus(\"Sending replay request...\");\n    setMessages([]);\n    setCoordHistory([]);\n    setLatestCoord(null);\n    setIsRunning(true);\n    setStartTime(Date.now());\n    fetch(\"/api/start-replay\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        index: selectedId\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.success) {\n        setStatus(\"Replay started!\");\n      } else {\n        setStatus(\"❌ Failed to start replay.\");\n        setIsRunning(false);\n      }\n    }).catch(err => {\n      setStatus(\"❌ Error contacting server.\");\n      setIsRunning(false);\n    });\n  };\n  const clearLog = () => {\n    setMessages([]);\n    setCoordHistory([]);\n  };\n  useEffect(() => {\n    if (!isRunning) return;\n    const interval = setInterval(() => {\n      fetch(\"/api/replay-status\").then(res => res.json()).then(data => {\n        if (data.messages) {\n          setMessages(prev => {\n            const updated = [...prev, ...data.messages.map(msg => ({\n              ...msg,\n              timestamp: ((Date.now() - startTime) / 1000).toFixed(2) + \"s\"\n            }))];\n\n            // Find coordinate updates\n            const lastUpdate = data.messages.reverse().find(m => m.type === \"update\");\n            if (lastUpdate && lastUpdate.data) {\n              const correctedCoord = {\n                x: lastUpdate.data.y,\n                // 🔁 Swapped\n                y: lastUpdate.data.x,\n                // 🔁 Swapped\n                z: lastUpdate.data.z,\n                time: Date.now()\n              };\n              setLatestCoord(correctedCoord);\n              setCoordHistory(prev => [...prev, correctedCoord]);\n            }\n            return updated;\n          });\n        }\n        if (data.done) {\n          setStatus(\"✅ Replay complete.\");\n          setIsRunning(false);\n          clearInterval(interval);\n        }\n      }).catch(err => {\n        setStatus(\"❌ Error polling status\");\n        setIsRunning(false);\n        clearInterval(interval);\n      });\n    }, 100);\n    return () => clearInterval(interval);\n  }, [isRunning, startTime]);\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Clean up old coordinate history points\n  useEffect(() => {\n    if (coordHistory.length > 10) {\n      const now = Date.now();\n      setCoordHistory(prev => prev.filter(coord => now - coord.time < 3000));\n    }\n  }, [coordHistory]);\n\n  // Convert grid coordinates to pixel positions\n  const coordToPixel = (x, y) => {\n    // Map x from [-30, 30] to [0, 100%] of grid width\n    // Map y from [0, 40] to [100%, 0] of grid height (inverted y-axis)\n\n    if (!gridRef.current) return {\n      x: 0,\n      y: 0\n    };\n    const gridWidth = gridRef.current.clientWidth;\n    const gridHeight = gridRef.current.clientHeight;\n\n    // Convert x from [-30, 30] to [0, 1] then to pixels\n    const normalizedX = (x + 30) / 60;\n    const pixelX = normalizedX * gridWidth;\n\n    // Convert y from [0, 40] to [1, 0] then to pixels (inverted)\n    const normalizedY = 1 - y / 40;\n    const pixelY = normalizedY * gridHeight;\n    return {\n      x: pixelX,\n      y: pixelY\n    };\n  };\n\n  // Debug function to log coordinates\n  const logCoordinates = () => {\n    console.log(\"Latest coord:\", latestCoord);\n    console.log(\"Coord history:\", coordHistory);\n    if (latestCoord) {\n      const pos = coordToPixel(latestCoord.x, latestCoord.y);\n      console.log(\"Pixel position:\", pos);\n    }\n  };\n\n  // Call logCoordinates when coordinates change\n  useEffect(() => {\n    logCoordinates();\n  }, [latestCoord, coordHistory]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-t from-black to-blue-950/90 border border-blue-500/30 shadow-2xl rounded-lg p-4 md:p-6 space-y-4 md:space-y-6 font-display\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl md:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 tracking-wide text-center\",\n      children: \"Replay Mode\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: REPLAY_OPTIONS.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedId(option.id),\n        className: `block w-full text-left px-4 py-3 rounded-lg transition shadow-md border text-sm font-bold\n              ${selectedId === option.id ? \"bg-gradient-to-r from-blue-800 to-blue-900 text-white border-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)]\" : \"bg-blue-950/80 hover:bg-blue-900/60 border-blue-500/20 hover:border-blue-500/40\"}`,\n        disabled: isRunning,\n        children: option.name\n      }, option.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startReplay,\n      disabled: selectedId === null || isRunning,\n      className: \"w-full mt-4 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 shadow-lg shadow-green-900/50 hover:shadow-green-500/30 hover:shadow-[0_0_20px_rgba(16,185,129,0.6)] disabled:shadow-none\",\n      children: isRunning ? \"Running...\" : \"Start Replay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: clearLog,\n      className: \"w-full bg-gradient-to-r from-red-700 to-red-800 hover:from-red-600 hover:to-red-700 text-white py-2 px-2 mt-2 rounded-lg shadow-md shadow-red-900/50 hover:shadow-red-500/30 hover:shadow-[0_0_15px_rgba(239,68,68,0.5)] font-bold\",\n      disabled: messages.length === 0,\n      children: \"Clear Log\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 p-3 md:p-4 bg-black/80 rounded-lg text-sm max-h-48 md:max-h-64 overflow-y-auto border border-blue-500/30 shadow-inner\",\n      ref: scrollRef,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-cyan-300 mb-2\",\n        children: \"Replay Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-1 text-blue-100\",\n        children: messages.map((msg, i) => {\n          if (msg.type === \"update\" && msg.data) {\n            // Swap x and y for display\n            const {\n              x: y,\n              y: x,\n              z\n            } = msg.data;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\u27A4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-300 font-mono\",\n                children: [\"x: \", x, \", y: \", y, \", z: \", z]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"bounds\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-yellow-300 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-yellow-300\",\n                children: \"\\u26A0\\uFE0F Out of bounds!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"done\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-green-400 font-semibold flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400\",\n                children: \"\\u2705 Replay Complete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this);\n          }\n          if (msg.type === \"error\") {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"text-red-400 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: \"\\uD83D\\uDD52\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-cyan-200\",\n                children: msg.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-400\",\n                children: [\"\\u274C Error: \", msg.message]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this);\n          }\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-gray-400 italic flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDD52\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-cyan-200\",\n              children: msg.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: JSON.stringify(msg)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 italic text-xs text-cyan-300\",\n        children: [\"Status: \", status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 bg-black/80 p-3 md:p-4 rounded-lg shadow-xl relative border border-blue-500/30\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-sm text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2\",\n        children: \"Live Position Grid (x vs y in cm)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: gridRef,\n        className: \"w-full h-48 md:h-64 bg-blue-950/50 rounded-lg relative border border-blue-500/30 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 grid grid-cols-6 grid-rows-4\",\n          children: [Array.from({\n            length: 7\n          }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-r border-blue-500/20\"\n          }, `v-${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)), Array.from({\n            length: 5\n          }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b border-blue-500/20\"\n          }, `h-${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-0 left-0 right-0 flex justify-between px-2 text-xs text-blue-300/70\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"-30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"-20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 left-0 bottom-0 flex flex-col justify-between py-2 text-xs text-blue-300/70\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"40\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), coordHistory.map((coord, i) => {\n          const pos = coordToPixel(coord.x, coord.y);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute w-2 h-2 bg-blue-400 rounded-full\",\n            style: {\n              left: pos.x - 4,\n              top: pos.y - 4\n            }\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this);\n        }), latestCoord && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute w-4 h-4 bg-green-400 rounded-full shadow-lg shadow-green-500/50\",\n          style: {\n            left: coordToPixel(latestCoord.x, latestCoord.y).x - 8,\n            top: coordToPixel(latestCoord.x, latestCoord.y).y - 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), latestCoord && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-2 right-2 bg-black/70 p-1 rounded text-xs text-white\",\n          children: [\"x: \", latestCoord.x.toFixed(1), \", y: \", latestCoord.y.toFixed(1)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n}\n_s(ReplayMode, \"U4DNvrf0Wwvz9Ty09nYkYdbFEcA=\");\n_c = ReplayMode;\nvar _c;\n$RefreshReg$(_c, \"ReplayMode\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useRef","jsxDEV","_jsxDEV","REPLAY_OPTIONS","id","name","ReplayMode","isMobile","selectedId","setSelectedId","status","setStatus","messages","setMessages","isRunning","setIsRunning","startTime","setStartTime","scrollRef","latestCoord","setLatestCoord","coordHistory","setCoordHistory","gridRef","startReplay","Date","now","fetch","method","headers","body","JSON","stringify","index","then","res","json","data","success","catch","err","clearLog","interval","setInterval","prev","updated","map","msg","timestamp","toFixed","lastUpdate","reverse","find","m","type","correctedCoord","x","y","z","time","done","clearInterval","current","scrollTop","scrollHeight","length","filter","coord","coordToPixel","gridWidth","clientWidth","gridHeight","clientHeight","normalizedX","pixelX","normalizedY","pixelY","logCoordinates","console","log","pos","className","children","fileName","lineNumber","columnNumber","option","onClick","disabled","ref","i","message","Array","from","_","style","left","top","_c","$RefreshReg$"],"sources":["/Users/matthewlones/Documents/flask-react-app/frontend-final/src/components/ReplayMode.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\n\nconst REPLAY_OPTIONS = [\n  { id: 0, name: \"Harvest the Plant\" },\n  { id: 1, name: \"Draw a Circle\" },\n  { id: 2, name: \"Wave Hello\" },\n]\n\nexport default function ReplayMode({ isMobile }) {\n  const [selectedId, setSelectedId] = useState(null)\n  const [status, setStatus] = useState(\"Idle\")\n  const [messages, setMessages] = useState([])\n  const [isRunning, setIsRunning] = useState(false)\n  const [startTime, setStartTime] = useState(null)\n  const scrollRef = useRef(null)\n  const [latestCoord, setLatestCoord] = useState(null)\n  const [coordHistory, setCoordHistory] = useState([])\n  const gridRef = useRef(null)\n\n  const startReplay = () => {\n    if (selectedId === null) return\n\n    setStatus(\"Sending replay request...\")\n    setMessages([])\n    setCoordHistory([])\n    setLatestCoord(null)\n    setIsRunning(true)\n    setStartTime(Date.now())\n\n    fetch(\"/api/start-replay\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ index: selectedId }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.success) {\n          setStatus(\"Replay started!\")\n        } else {\n          setStatus(\"❌ Failed to start replay.\")\n          setIsRunning(false)\n        }\n      })\n      .catch((err) => {\n        setStatus(\"❌ Error contacting server.\")\n        setIsRunning(false)\n      })\n  }\n\n  const clearLog = () => {\n    setMessages([])\n    setCoordHistory([])\n  }\n\n  useEffect(() => {\n    if (!isRunning) return\n\n    const interval = setInterval(() => {\n      fetch(\"/api/replay-status\")\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.messages) {\n            setMessages((prev) => {\n              const updated = [\n                ...prev,\n                ...data.messages.map((msg) => ({\n                  ...msg,\n                  timestamp: ((Date.now() - startTime) / 1000).toFixed(2) + \"s\",\n                })),\n              ]\n\n              // Find coordinate updates\n              const lastUpdate = data.messages.reverse().find((m) => m.type === \"update\");\n              if (lastUpdate && lastUpdate.data) {\n                const correctedCoord = {\n                  x: lastUpdate.data.y, // 🔁 Swapped\n                  y: lastUpdate.data.x, // 🔁 Swapped\n                  z: lastUpdate.data.z,\n                  time: Date.now(),\n                };\n                setLatestCoord(correctedCoord);\n                setCoordHistory((prev) => [...prev, correctedCoord]);\n              }\n\n              return updated\n            })\n          }\n          if (data.done) {\n            setStatus(\"✅ Replay complete.\")\n            setIsRunning(false)\n            clearInterval(interval)\n          }\n        })\n        .catch((err) => {\n          setStatus(\"❌ Error polling status\")\n          setIsRunning(false)\n          clearInterval(interval)\n        })\n    }, 100)\n\n    return () => clearInterval(interval)\n  }, [isRunning, startTime])\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\n    }\n  }, [messages])\n\n  // Clean up old coordinate history points\n  useEffect(() => {\n    if (coordHistory.length > 10) {\n      const now = Date.now()\n      setCoordHistory((prev) => prev.filter((coord) => now - coord.time < 3000))\n    }\n  }, [coordHistory])\n\n  // Convert grid coordinates to pixel positions\n  const coordToPixel = (x, y) => {\n    // Map x from [-30, 30] to [0, 100%] of grid width\n    // Map y from [0, 40] to [100%, 0] of grid height (inverted y-axis)\n\n    if (!gridRef.current) return { x: 0, y: 0 }\n\n    const gridWidth = gridRef.current.clientWidth\n    const gridHeight = gridRef.current.clientHeight\n\n    // Convert x from [-30, 30] to [0, 1] then to pixels\n    const normalizedX = (x + 30) / 60\n    const pixelX = normalizedX * gridWidth\n\n    // Convert y from [0, 40] to [1, 0] then to pixels (inverted)\n    const normalizedY = 1 - y / 40\n    const pixelY = normalizedY * gridHeight\n\n    return { x: pixelX, y: pixelY }\n  }\n\n  // Debug function to log coordinates\n  const logCoordinates = () => {\n    console.log(\"Latest coord:\", latestCoord);\n    console.log(\"Coord history:\", coordHistory);\n    if (latestCoord) {\n      const pos = coordToPixel(latestCoord.x, latestCoord.y);\n      console.log(\"Pixel position:\", pos);\n    }\n  }\n\n  // Call logCoordinates when coordinates change\n  useEffect(() => {\n    logCoordinates();\n  }, [latestCoord, coordHistory]);\n\n  return (\n    <div className=\"bg-gradient-to-t from-black to-blue-950/90 border border-blue-500/30 shadow-2xl rounded-lg p-4 md:p-6 space-y-4 md:space-y-6 font-display\">\n      <h2 className=\"text-xl md:text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 tracking-wide text-center\">\n        Replay Mode\n      </h2>\n\n      <div className=\"space-y-2\">\n        {REPLAY_OPTIONS.map((option) => (\n          <button\n            key={option.id}\n            onClick={() => setSelectedId(option.id)}\n            className={`block w-full text-left px-4 py-3 rounded-lg transition shadow-md border text-sm font-bold\n              ${\n                selectedId === option.id\n                  ? \"bg-gradient-to-r from-blue-800 to-blue-900 text-white border-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.5)]\"\n                  : \"bg-blue-950/80 hover:bg-blue-900/60 border-blue-500/20 hover:border-blue-500/40\"\n              }`}\n            disabled={isRunning}\n          >\n            {option.name}\n          </button>\n        ))}\n      </div>\n\n      <button\n        onClick={startReplay}\n        disabled={selectedId === null || isRunning}\n        className=\"w-full mt-4 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-500 hover:to-emerald-600 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 shadow-lg shadow-green-900/50 hover:shadow-green-500/30 hover:shadow-[0_0_20px_rgba(16,185,129,0.6)] disabled:shadow-none\"\n      >\n        {isRunning ? \"Running...\" : \"Start Replay\"}\n      </button>\n\n      <button\n        onClick={clearLog}\n        className=\"w-full bg-gradient-to-r from-red-700 to-red-800 hover:from-red-600 hover:to-red-700 text-white py-2 px-2 mt-2 rounded-lg shadow-md shadow-red-900/50 hover:shadow-red-500/30 hover:shadow-[0_0_15px_rgba(239,68,68,0.5)] font-bold\"\n        disabled={messages.length === 0}\n      >\n        Clear Log\n      </button>\n\n      <div\n        className=\"mt-4 p-3 md:p-4 bg-black/80 rounded-lg text-sm max-h-48 md:max-h-64 overflow-y-auto border border-blue-500/30 shadow-inner\"\n        ref={scrollRef}\n      >\n        <p className=\"font-bold text-cyan-300 mb-2\">Replay Status:</p>\n        <ul className=\"space-y-1 text-blue-100\">\n          {messages.map((msg, i) => {\n            if (msg.type === \"update\" && msg.data) {\n              // Swap x and y for display\n              const { x: y, y: x, z } = msg.data;\n              return (\n                <li key={i} className=\"flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-gray-400\">➤</span>\n                  <span className=\"text-green-300 font-mono\">\n                    x: {x}, y: {y}, z: {z}\n                  </span>\n                </li>\n              );\n            }\n            \n            if (msg.type === \"bounds\") {\n              return (\n                <li key={i} className=\"text-yellow-300 flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-yellow-300\">⚠️ Out of bounds!</span>\n                </li>\n              )\n            }\n            if (msg.type === \"done\") {\n              return (\n                <li key={i} className=\"text-green-400 font-semibold flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-green-400\">✅ Replay Complete</span>\n                </li>\n              )\n            }\n            if (msg.type === \"error\") {\n              return (\n                <li key={i} className=\"text-red-400 flex items-center space-x-2\">\n                  <span className=\"text-gray-400\">🕒</span>\n                  <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                  <span className=\"text-red-400\">❌ Error: {msg.message}</span>\n                </li>\n              )\n            }\n            return (\n              <li key={i} className=\"text-gray-400 italic flex items-center space-x-2\">\n                <span>🕒</span>\n                <span className=\"text-cyan-200\">{msg.timestamp}</span>\n                <span>{JSON.stringify(msg)}</span>\n              </li>\n            )\n          })}\n        </ul>\n        <p className=\"mt-2 italic text-xs text-cyan-300\">Status: {status}</p>\n      </div>\n\n      <div className=\"mt-4 bg-black/80 p-3 md:p-4 rounded-lg shadow-xl relative border border-blue-500/30\">\n        <p className=\"font-bold text-sm text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400 mb-2\">\n          Live Position Grid (x vs y in cm)\n        </p>\n        <div \n          ref={gridRef}\n          className=\"w-full h-48 md:h-64 bg-blue-950/50 rounded-lg relative border border-blue-500/30 overflow-hidden\"\n        >\n          {/* Grid lines */}\n          <div className=\"absolute inset-0 grid grid-cols-6 grid-rows-4\">\n            {Array.from({ length: 7 }).map((_, i) => (\n              <div key={`v-${i}`} className=\"border-r border-blue-500/20\"></div>\n            ))}\n            {Array.from({ length: 5 }).map((_, i) => (\n              <div key={`h-${i}`} className=\"border-b border-blue-500/20\"></div>\n            ))}\n          </div>\n          \n          {/* Coordinate labels */}\n          <div className=\"absolute bottom-0 left-0 right-0 flex justify-between px-2 text-xs text-blue-300/70\">\n            <span>-30</span>\n            <span>-20</span>\n            <span>-10</span>\n            <span>0</span>\n            <span>10</span>\n            <span>20</span>\n            <span>30</span>\n          </div>\n          <div className=\"absolute top-0 left-0 bottom-0 flex flex-col justify-between py-2 text-xs text-blue-300/70\">\n            <span>40</span>\n            <span>30</span>\n            <span>20</span>\n            <span>10</span>\n            <span>0</span>\n          </div>\n          \n          {/* Position history */}\n          {coordHistory.map((coord, i) => {\n            const pos = coordToPixel(coord.x, coord.y);\n            return (\n              <div\n                key={i}\n                className=\"absolute w-2 h-2 bg-blue-400 rounded-full\"\n                style={{ left: pos.x - 4, top: pos.y - 4 }}\n              />\n            );\n          })}\n          \n          {/* Current position */}\n          {latestCoord && (\n            <div\n              className=\"absolute w-4 h-4 bg-green-400 rounded-full shadow-lg shadow-green-500/50\"\n              style={{ \n                left: coordToPixel(latestCoord.x, latestCoord.y).x - 8, \n                top: coordToPixel(latestCoord.x, latestCoord.y).y - 8 \n              }}\n            />\n          )}\n          \n          {/* Debug info */}\n          {latestCoord && (\n            <div className=\"absolute top-2 right-2 bg-black/70 p-1 rounded text-xs text-white\">\n              x: {latestCoord.x.toFixed(1)}, y: {latestCoord.y.toFixed(1)}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}